<div class="dashboard-container">
  <!-- Overlay (solo en vista móvil) -->
  @if(showOverlay){
  <div class="overlay" (click)="toggleSidebar()"></div>
  }

  <div class="wrapper d-flex">
    <!-- Sidebar -->
    <nav [class.collapsed]="isSidebarCollapsed" class="sidebar bg-dark text-white">
      <div class="sidebar-header p-3 fw-bold border-bottom border-secondary">
        AdminLTE v5
      </div>
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link text-white" (click)="toggleSubmenu('mantenimiento')">
            <i class="bi bi-tools"></i> Mantenimiento
            <i class="bi" [ngClass]="{
                'bi-chevron-down': !activeSubmenus['mantenimiento'],
                'bi-chevron-up': activeSubmenus['mantenimiento']
              }"></i>
          </a>

          @if(activeSubmenus['mantenimiento']) {
          <ul class="nav flex-column ms-3 submenu">
            <li class="nav-item">
              <a class="nav-link text-white" routerLink="/dashboard/mantenimiento/persona" [ngClass]="{
                  'list-item-active': isActiveSubroute(
                    '/dashboard/mantenimiento/persona'
                  )
                }" (click)="closeOnMobile()">Persona</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" routerLink="/dashboard/mantenimiento/usuario" [ngClass]="{
                  'list-item-active': isActiveSubroute(
                    '/dashboard/dashboard/mantenimiento/usuario'
                  )
                }" (click)="closeOnMobile()">Usuario</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" routerLink="/dashboard/mantenimiento/cargo" [ngClass]="{
                  'list-item-active': isActiveSubroute(
                    '/dashboard/mantenimiento/cargo'
                  )
                }" (click)="closeOnMobile()">Cargo</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" routerLink="/dashboard/mantenimiento/horario" [ngClass]="{
                  'list-item-active': isActiveSubroute(
                    '/dashboard/mantenimiento/horario'
                  )
                }" (click)="closeOnMobile()">Horario</a>
            </li>
          </ul>
          }
        </li>
      </ul>
    </nav>

    <!-- Main Content -->
    <div class="main-content flex-fill">
      <header class="navbar navbar-expand navbar-dark bg-dark px-3 d-flex justify-content-between">
        <div class="d-flex align-items-center">
          <button class="btn btn-outline-light me-2 d-md-inline d-block" (click)="toggleSidebar()">
            <i class="bi bi-list"></i>
          </button>
          <span class="navbar-text">Panel de Control</span>
        </div>

        <div class="d-flex align-items-center flex-wrap gap-2 justify-content-end">
          <!-- Botón notificaciones -->
          <div class="dropdown me-2">
            <button class="btn btn-light position-relative dropdown-toggle" type="button" data-bs-toggle="dropdown"
              aria-expanded="false" aria-label="Notificaciones">
              <i class="bi bi-bell fs-5"></i>
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                3
                <span class="visually-hidden">notificaciones no leídas</span>
              </span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li>
                <h6 class="dropdown-header">Notificaciones</h6>
              </li>
              <li>
                <a class="dropdown-item" href="#">Nueva solicitud recibida</a>
              </li>
              <li><a class="dropdown-item" href="#">Usuario actualizado</a></li>
              <li><a class="dropdown-item" href="#">Revisión pendiente</a></li>
              <li>
                <hr class="dropdown-divider" />
              </li>
              <li>
                <a class="dropdown-item text-primary" href="#">Ver todas</a>
              </li>
            </ul>
          </div>

          <!-- Botón de perfil -->
          <div class="dropdown">
            <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-person-circle fs-5"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li>
                <a class="dropdown-item" href="#">Actualizar mis datos</a>
              </li>
              <li><a class="dropdown-item" href="#">Mi perfil</a></li>
              <li>
                <hr class="dropdown-divider" />
              </li>
              <li>
                <a class="dropdown-item text-danger" href="#">Cerrar sesión</a>
              </li>
            </ul>
          </div>
        </div>
      </header>

      <section class="p-4">
        <router-outlet />
      </section>

      <footer class="footer bg-light text-center py-3 border-top mt-auto">
        <small class="text-muted">© 2025 Tu Empresa. Todos los derechos reservados.</small>
      </footer>
    </div>
  </div>
</div>